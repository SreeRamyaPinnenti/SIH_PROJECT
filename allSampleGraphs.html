<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Exploring Chart.js</title>
    <script src="https://www.gstatic.com/firebasejs/5.8.3/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyCRHBD_txj2x7md7jUZ_LvhVL57OyeStDc",
    authDomain: "sihstpsvecw.firebaseapp.com",
    databaseURL: "https://sihstpsvecw.firebaseio.com",
    projectId: "sihstpsvecw",
    storageBucket: "sihstpsvecw.appspot.com",
    messagingSenderId: "494848378783"
  };
  firebase.initializeApp(config);

</script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script>
  function fun(stpArr){
    //alert("hiii")
      var x=document.getElementById('select')
      //var y=document.getElementById('select1')
     // alert(x.value+"         "+y.value);
      //var some = y.value;
      //alert(some);
      //alert(y.value+" "+stpArr[x.selectedIndex])
      alert("stp/"+stpArr[x.selectedIndex-1])
       var rootRef = firebase.database().ref().child("stp/"+stpArr[x.selectedIndex-1]);
       var rawArr1=[];
       var treatedArr1=[];
       var rawArr2=[];
       var treatedArr2=[];
       var rawArr3=[];
       var treatedArr3=[];
       var rawArr4=[];
       var treatedArr4=[];
       var rawArr5=[];
       var treatedArr5=[];
       var rawArr6=[];
       var treatedArr6=[];

  rootRef.once("value", function(snapshot) {
   
    //document.write(JSON.stringify(snapshot));
  snapshot.forEach(function(child) {

     var childVal = JSON.stringify(child.val().raw);
     console.log(childVal);
     //alert(childVal)
      // if(child.val().date == y.value){
      //   //document.write("fghjk");
        //console.log(child.val().raw.ph)
        //myFunction2(child.val().raw.ph);
        //alert(child.val().raw.ph)
      
        rawArr1.push(child.val().raw.ph);
        rawArr2.push(child.val().raw.do);
        rawArr3.push(child.val().raw.tds);
        rawArr4.push(child.val().raw.temperature);
        rawArr5.push(child.val().raw.ec);
        rawArr6.push(child.val().raw.inflow);

        treatedArr1.push(child.val().treated.ph);
        treatedArr2.push(child.val().treated.do);
        treatedArr3.push(child.val().treated.tds);
        treatedArr4.push(child.val().treated.temperature);
        treatedArr5.push(child.val().treated.ec);
        treatedArr6.push(child.val().treated.volumetreated);
        
        //myFunction2(child.val().raw.temperature);
        //document.write(phar);
        console.log(rawArr1+" "+treatedArr1)
        myFunction2(rawArr1,treatedArr1,rawArr2,treatedArr2,rawArr3,treatedArr3,rawArr4,treatedArr4,rawArr5,treatedArr5,rawArr6,treatedArr6);

      //}

  });
  
});
}
 function  myFunction2(rawArr1,treatedArr1,rawArr2,treatedArr2,rawArr3,treatedArr3,rawArr4,treatedArr4,rawArr5,treatedArr5,rawArr6,treatedArr6){
//    new Chart(document.getElementById("bar-chart-grouped"), {
//     type: 'bar',
//     data: {
//       labels: ["ph", "Temperature", "DO", "TDS"],
//       datasets: [
//         {
//           label: "RAW",
//           backgroundColor: "#3e95cd",
//           data:rawArr
//         }, {
//           label: "TREATED",
//           backgroundColor: "#8e5ea2",
//           data: treatedArr
//         }
//       ]
//     },
//     options: {
//       title: {
//         display: true,
//         text: 'Population growth (millions)'
//       }
//     }
// });

  var FontSize = 8;  
    var speedCanvas = document.getElementById("speedChart");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = FontSize;

var dataFirst = {
    label: "RAW",
    data: rawArr1,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr1,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});
var speedCanvas = document.getElementById("speedChart1");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "RAW",
    data: rawArr2,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr2,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});
var speedCanvas = document.getElementById("speedChart3");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "RAW",
    data: rawArr3,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr3,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});
var speedCanvas = document.getElementById("speedChart4");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "RAW",
    data: rawArr4,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr4,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});

var speedCanvas = document.getElementById("speedChart5");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "RAW",
    data: rawArr5,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr5,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD ",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});

var speedCanvas = document.getElementById("speedChart6");
        //alert(rawArr);
Chart.defaults.global.defaultFontFamily = "Lato";
Chart.defaults.global.defaultFontSize = 18;

var dataFirst = {
    label: "RAW",
    data: rawArr6,
    lineTension: 0.3,
    fill: false,
    borderColor: 'red',
    backgroundColor: 'transparent',
    pointBorderColor: 'red',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2,
    pointStyle: 'rect'
  };

var dataSecond = {
    label: "TREATED",
    data: treatedArr6,
    lineTension: 0.3,
    fill: false,
    borderColor: 'purple',
    backgroundColor: 'transparent',
    pointBorderColor: 'purple',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };
var dataThird = {
    label: "STANDARD",
    data: ["123","22","210","90"],
    lineTension: 0.3,
    fill: false,
    borderColor: 'green',
    backgroundColor: 'transparent',
    pointBorderColor: 'yellow',
    pointBackgroundColor: 'lightgreen',
    pointRadius: 5,
    pointHoverRadius: 15,
    pointHitRadius: 30,
    pointBorderWidth: 2
  };

var speedData = {
  labels: [],
  datasets: [dataFirst, dataSecond,dataThird]
};

var chartOptions = {
  legend: {
    display: true,
    position: 'top',
    labels: {
      boxWidth: 30,
      fontColor: 'black'
    }
  }
};

var lineChart = new Chart(speedCanvas, {
  type: 'line',
  data: speedData,
  options: chartOptions
});
}
</script>
</head>
<style>
   /* .container {
        width: 50%;
        height: 50%;
    }*/
    .login
{
background-color :#4CAF50;
border :none;
color :white;
padding:10px 20px;
text-align:center;
text-decoration:none;
display:inline-block;
font-size:40px
margin:4px 2px;
cursor:pointer;
}
.login1
{
background-color :#4CAF50;
border :none;
color :white;
padding:10px 20px;
text-align:center;
text-decoration:none;
display:inline-block;
font-size:40px
margin:4px 2px;
margin-top: 5px;
cursor:pointer;
}


</style>

<body>
        
        <div style="float: left; width: 200px; margin:5px;">
  <select id="select" onselect="fun(this.selectedIndex)" class="login">
    <option selected>Select STP</option>

  </select>
  <button id="renderBtn" onclick="fun(stpArr)" class="login1" align = "center">
        Render
    </button>
    
<!-- <select class="login">
<option selected>Select STP</option>
 --><!-- <option selected>action1</option>
<option selected>action2</option>
<option selected>action3</option>
</select>-->
</div>

<!-- select PARAMETER:<select id="select1" onselect="fun(this.selectedIndex)">
  <option>ph</option>
  <option>do</option>
  <option>tds</option>
  <option>temperature</option>
</select>
 --><br><br>
<script type="text/javascript">
  // var pArr = ["ph","do","tds","temperature"];
var stpArr=[];
    //function myFun(){
      var rootRef = firebase.database().ref().child("stp");
       rootRef.once("value", function(snapshot) {
        
    
        //document.write(snapshot.key);
       snapshot.forEach(function(child) {
              // document.write(JSON.stringify(child));
               stpArr.push(child.key);
               //console.log(x);
      
  });
       // document.write(stpArr);
       //alert(stpArr);

        var selectBox = document.getElementById('select');

for(var i = 0, l = stpArr.length; i < l; i++){

selectBox.options.add( new Option(stpArr[i]));
}

});
    //alert(stpArr);  

//}

//var stpArr=["stp1","stp2","stp3","stp4"];
//alert(stpArr);

</script>


    <!-- <label for = "idOfCanvas">
Your Label<br />
    <canvas></canvas>
</label>
     -->
	 <table border="1" style="border-collapse: collapse;">
	 <tr>
	 <td>
	 <label for = "speedChart" style="font-size: 20px"><h3>Potential Hydrogen(pH)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left; " >
       <canvas id="speedChart" ></canvas>    
	   </div>
	   </label>
	 </td>
	 <td>
	 <label for = "speedChart1" style="font-size: 20px"><h3>Dissolve Oxygen(ppm)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left;" >
       <canvas id="speedChart1" ></canvas>    </div>
	   </label>
	 </td>
	 <td>
	 <label for = "speedChart3" style="font-size: 20px"><h3>Total Dissolved Salts(ppm)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left; " >
       <canvas id="speedChart3" ></canvas>    </div>
	   </label>
	 </td>
	 	</tr>
		<tr>
		<td>
	 <label for = "speedChart4" style="font-size: 20px"><h3>Temparature (Degree Celcius)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left; " >
       <canvas id="speedChart4" ></canvas>    </div>
	   </label>
	 </td>
	 <td>
	 <label for = "speedChart5" style="font-size: 20px"><h3>Electric Conductivity (Siemen per litre)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left; " >
       <canvas id="speedChart5" ></canvas>    </div>
	   </label>
	 </td>
	 <td>
	 <label for = "speedChart6" style="font-size: 20px"><h3>Volume(Litres)</h3></br>
     <div class="container22" style="width: 500px;height:250px;float: left;" >
       <canvas id="speedChart6" ></canvas>    </div>
	   </label>
	 </td>
		
		</tr>
	 </table >
	 
      
       
           
    <!-- <div class="container" style="width: 50%;height:100%;float: left;">
        <canvas id="bar-chart-grouped" ></canvas>    
</div>
 -->
</body>


</html>